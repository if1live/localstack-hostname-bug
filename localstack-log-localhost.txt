localstack_1  | 2019-09-20 06:32:19,882:API: 127.0.0.1 - - [20/Sep/2019 06:32:19] "GET / HTTP/1.1" 200 -
localstack_1  | Ready.
localstack_1  | 2019-09-20 06:36:51,716:API: 127.0.0.1 - - [20/Sep/2019 06:36:51] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ?location HTTP/1.1" 404 -
localstack_1  | 2019-09-20 06:36:51,730:API: 127.0.0.1 - - [20/Sep/2019 06:36:51] "PUT /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ HTTP/1.1" 200 -
localstack_1  | 2019-09-20T06:36:51:DEBUG:localstack.services.cloudformation.cloudformation_listener: Error response from CloudFormation (400) POST /: b'<ErrorResponse xmlns="http://cloudformation.amazonaws.com/doc/2010-05-15/">\n  <Error>\n    <Type>Sender</Type>\n    <Code>ValidationError</Code>\n    <Message>Stack with id example-localhost-local does not exist</Message>\n  </Error>\n  <RequestId>cf4c737e-5ae2-11e4-a7c9-ad44eEXAMPLE</RequestId>\n</ErrorResponse>'
localstack_1  | 2019-09-20T06:36:51:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ServerlessDeploymentBucket: None
localstack_1  | 2019-09-20T06:36:51:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::S3::Bucket', 'Properties': {'BucketEncryption': {'ServerSideEncryptionConfiguration': [{'ServerSideEncryptionByDefault': {'SSEAlgorithm': 'AES256'}}]}, 'BucketName': 'example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ'}}
localstack_1  | 2019-09-20T06:36:51:DEBUG:localstack.utils.cloudformation.template_deployer: Deploying resource type "S3::Bucket" id "ServerlessDeploymentBucket"
localstack_1  | 2019-09-20T06:36:51:DEBUG:localstack.utils.cloudformation.template_deployer: Request for creating resource type "S3::Bucket": create_bucket {'Bucket': 'example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ', 'ACL': 'public-read'}
localstack_1  | 2019-09-20 06:36:56,825:API: 127.0.0.1 - - [20/Sep/2019 06:36:56] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ?list-type=2&prefix=serverless%2Fexample-localhost%2Flocal HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:56,876:API: 127.0.0.1 - - [20/Sep/2019 06:36:56] "PUT /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/compiled-cloudformation-template.json HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:56,910:API: 127.0.0.1 - - [20/Sep/2019 06:36:56] "PUT /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:56,936:API: 127.0.0.1 - - [20/Sep/2019 06:36:56] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/compiled-cloudformation-template.json HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:57,066:API: 127.0.0.1 - - [20/Sep/2019 06:36:57] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:57,084:API: 127.0.0.1 - - [20/Sep/2019 06:36:57] "HEAD /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:57,094:API: 127.0.0.1 - - [20/Sep/2019 06:36:57] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20T06:36:56:WARNING:localstack.services.awslambda.lambda_api: Function not found: arn:aws:lambda:us-east-1:000000000000:function:example-localhost-local-hello
localstack_1  | 2019-09-20T06:36:56:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ApiGatewayRestApi: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::ApiGateway::RestApi', 'Properties': {'Name': 'local-example-localhost', 'EndpointConfiguration': {'Types': ['EDGE']}}}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Deploying resource type "ApiGateway::RestApi" id "ApiGatewayRestApi"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Request for creating resource type "ApiGateway::RestApi": create_rest_api {'name': 'local-example-localhost'}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Updating resource id: 81e97eac - q8fts3masr, 81e97eac - {'Type': 'AWS::ApiGateway::RestApi', 'Properties': {'Name': 'local-example-localhost', 'EndpointConfiguration': {'Types': ['EDGE']}}}
localstack_1  | 2019-09-20T06:36:57:INFO:localstack.services.cloudformation.cloudformation_starter: Updating resource ID from 81e97eac to q8fts3masr (us-east-1)
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.services.cloudformation.cloudformation_starter: Unable to determine physical_resource_id for resource <class 'moto.apigateway.models.RestAPI'>
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/IamRoleLambdaExecution: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Resource IamRoleLambdaExecution need not be deployed: {'Type': 'AWS::IAM::Role', 'Properties': {'AssumeRolePolicyDocument': {'Version': '2012-10-17', 'Statement': [{'Effect': 'Allow', 'Principal': {'Service': ['lambda.amazonaws.com']}, 'Action': ['sts:AssumeRole']}]}, 'Policies': [{'PolicyName': 'local-example-localhost-lambda', 'PolicyDocument': {'Version': '2012-10-17', 'Statement': [{'Effect': 'Allow', 'Action': ['logs:CreateLogStream'], 'Resource': ['arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/example-localhost-local*:*']}, {'Effect': 'Allow', 'Action': ['logs:PutLogEvents'], 'Resource': ['arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/example-localhost-local*:*:*']}]}}], 'Path': '/', 'RoleName': 'example-localhost-local-us-east-1-lambdaRole'}}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::IAM::Role', 'Properties': {'AssumeRolePolicyDocument': {'Version': '2012-10-17', 'Statement': [{'Effect': 'Allow', 'Principal': {'Service': ['lambda.amazonaws.com']}, 'Action': ['sts:AssumeRole']}]}, 'Policies': [{'PolicyName': 'local-example-localhost-lambda', 'PolicyDocument': {'Version': '2012-10-17', 'Statement': [{'Effect': 'Allow', 'Action': ['logs:CreateLogStream'], 'Resource': ['arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/example-localhost-local*:*']}, {'Effect': 'Allow', 'Action': ['logs:PutLogEvents'], 'Resource': ['arn:aws:logs:us-east-1:123456789012:log-group:/aws/lambda/example-localhost-local*:*:*']}]}}], 'Path': '/', 'RoleName': 'example-localhost-local-us-east-1-lambdaRole'}}
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.utils.cloudformation.template_deployer: Unable to update resource type "IAM::Role", id "IamRoleLambdaExecution"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/HelloLambdaVersionPUQ1g8m26otAMm9MFGtdupVUFmCREiM65Qe8GOsw5y0: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/HelloLambdaFunction: None
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.services.awslambda.lambda_api: Function not found: arn:aws:lambda:us-east-1:000000000000:function:example-localhost-local-hello
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::Lambda::Function', 'Properties': {'Code': {'S3Bucket': 'example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ', 'S3Key': 'serverless/example-localhost/local/1568961411585-2019-09-20T06:36:51.585Z/example-localhost.zip'}, 'FunctionName': 'example-localhost-local-hello', 'Handler': 'handler.hello', 'MemorySize': 1024, 'Role': 'arn:aws:iam::000000000000:role/example-localhost-local-IamRoleLambdaExecution-DOT7ZFTOA8JM', 'Runtime': 'nodejs10.x', 'Timeout': 6}, 'DependsOn': ['HelloLogGroup', 'IamRoleLambdaExecution']}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Deploying resource type "Lambda::Function" id "HelloLambdaFunction"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Request for creating resource type "Lambda::Function": create_function {'FunctionName': 'example-localhost-local-hello', 'Runtime': 'nodejs10.x', 'Role': 'test_role', 'Handler': 'handler.hello', 'Code': {'S3Bucket': 'example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ', 'S3Key': 'serverless/example-localhost/local/1568961411585-2019-09-20T06:36:51.585Z/example-localhost.zip'}, 'Timeout': 6, 'MemorySize': 1024}
localstack_1  | 2019-09-20 06:36:57,110:API: 127.0.0.1 - - [20/Sep/2019 06:36:57] "HEAD /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20 06:36:57,122:API: 127.0.0.1 - - [20/Sep/2019 06:36:57] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ/serverless/example-localhost/local/1568961411585-2019-09-20T06%3A36%3A51.585Z/example-localhost.zip HTTP/1.1" 200 -
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Resource HelloLambdaVersionPUQ1g8m26otAMm9MFGtdupVUFmCREiM65Qe8GOsw5y0 need not be deployed: {'Type': 'AWS::Lambda::Version', 'DeletionPolicy': 'Retain', 'Properties': {'FunctionName': 'example-localhost-local-hello', 'CodeSha256': 'UUfSlt9GCPCK1mtZAw+DAipQYvmU2EZd8akAjojZE3E='}}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::Lambda::Version', 'DeletionPolicy': 'Retain', 'Properties': {'FunctionName': 'example-localhost-local-hello', 'CodeSha256': 'UUfSlt9GCPCK1mtZAw+DAipQYvmU2EZd8akAjojZE3E='}}
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.utils.cloudformation.template_deployer: Unable to update resource type "Lambda::Version", id "HelloLambdaVersionPUQ1g8m26otAMm9MFGtdupVUFmCREiM65Qe8GOsw5y0"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/HelloLogGroup: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Resource HelloLogGroup need not be deployed: {'Type': 'AWS::Logs::LogGroup', 'Properties': {'LogGroupName': '/aws/lambda/example-localhost-local-hello'}}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::Logs::LogGroup', 'Properties': {'LogGroupName': '/aws/lambda/example-localhost-local-hello'}}
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.utils.cloudformation.template_deployer: Unable to update resource type "Logs::LogGroup", id "HelloLogGroup"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ApiGatewayMethodHelloGet: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ApiGatewayResourceHello: None
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::ApiGateway::Resource', 'Properties': {'ParentId': 'r5l2fz22yt', 'PathPart': 'hello', 'RestApiId': 'q8fts3masr'}}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Deploying resource type "ApiGateway::Resource" id "ApiGatewayResourceHello"
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.utils.cloudformation.template_deployer: Request for creating resource type "ApiGateway::Resource": create_resource {'restApiId': 'q8fts3masr', 'pathPart': 'hello', 'parentId': 'r5l2fz22yt'}
localstack_1  | 2019-09-20T06:36:57:DEBUG:localstack.services.cloudformation.cloudformation_starter: Updating resource id: e23ec7a4 - vaj6fikuss, <moto.apigateway.models.Resource object at 0x7fa486d0e438> - {'Type': 'AWS::ApiGateway::Resource', 'Properties': {'ParentId': 'r5l2fz22yt', 'PathPart': 'hello', 'RestApiId': 'q8fts3masr'}}
localstack_1  | 2019-09-20T06:36:57:INFO:localstack.services.cloudformation.cloudformation_starter: Updating resource ID from e23ec7a4 to vaj6fikuss (us-east-1)
localstack_1  | 2019-09-20T06:36:57:WARNING:localstack.services.cloudformation.cloudformation_starter: Unable to determine physical_resource_id for resource <class 'moto.apigateway.models.Resource'>
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::ApiGateway::Method', 'Properties': {'HttpMethod': 'GET', 'RequestParameters': {}, 'ResourceId': 'vaj6fikuss', 'RestApiId': 'q8fts3masr', 'ApiKeyRequired': False, 'AuthorizationType': 'NONE', 'Integration': {'IntegrationHttpMethod': 'POST', 'Type': 'AWS_PROXY', 'Uri': 'arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:example-localhost-local-hello/invocations'}, 'MethodResponses': []}}
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ApiGatewayDeployment1568961390111: None
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::ApiGateway::Deployment', 'Properties': {'RestApiId': 'q8fts3masr', 'StageName': 'local'}, 'DependsOn': ['ApiGatewayMethodHelloGet']}
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.utils.cloudformation.template_deployer: Deploying resource type "ApiGateway::Deployment" id "ApiGatewayDeployment1568961390111"
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.utils.cloudformation.template_deployer: Request for creating resource type "ApiGateway::Deployment": create_deployment {'restApiId': 'q8fts3masr', 'stageName': 'local'}
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Updating resource id: a40d0205 - mopzf1sie9, {'id': 'a40d0205', 'stageName': 'local', 'description': '', 'createdDate': 1568961418} - {'Type': 'AWS::ApiGateway::Deployment', 'Properties': {'RestApiId': 'q8fts3masr', 'StageName': 'local'}, 'DependsOn': ['ApiGatewayMethodHelloGet']}
localstack_1  | 2019-09-20T06:36:58:INFO:localstack.services.cloudformation.cloudformation_starter: Updating resource ID from a40d0205 to mopzf1sie9 (us-east-1)
localstack_1  | 2019-09-20T06:36:58:WARNING:localstack.services.cloudformation.cloudformation_starter: Unable to determine physical_resource_id for resource <class 'moto.apigateway.models.Deployment'>
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/HelloLambdaFunction: False
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::Lambda::Function', 'Properties': {'Code': {'S3Bucket': 'example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ', 'S3Key': 'serverless/example-localhost/local/1568961411585-2019-09-20T06:36:51.585Z/example-localhost.zip'}, 'FunctionName': 'example-localhost-local-hello', 'Handler': 'handler.hello', 'MemorySize': 1024, 'Role': 'arn:aws:iam::000000000000:role/example-localhost-local-IamRoleLambdaExecution-DOT7ZFTOA8JM', 'Runtime': 'nodejs10.x', 'Timeout': 6}, 'DependsOn': ['HelloLogGroup', 'IamRoleLambdaExecution']}
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/HelloLambdaPermissionApiGateway: None
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Resource HelloLambdaPermissionApiGateway need not be deployed: {'Type': 'AWS::Lambda::Permission', 'Properties': {'FunctionName': 'arn:aws:lambda:us-east-1:123456789012:function:example-localhost-local-hello', 'Action': 'lambda:InvokeFunction', 'Principal': 'apigateway.amazonaws.com', 'SourceArn': 'arn:aws:execute-api:us-east-1:123456789012:q8fts3masr/*/*'}}
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Deploying CloudFormation resource: {'Type': 'AWS::Lambda::Permission', 'Properties': {'FunctionName': 'arn:aws:lambda:us-east-1:123456789012:function:example-localhost-local-hello', 'Action': 'lambda:InvokeFunction', 'Principal': 'apigateway.amazonaws.com', 'SourceArn': 'arn:aws:execute-api:us-east-1:123456789012:q8fts3masr/*/*'}}
localstack_1  | 2019-09-20T06:36:58:WARNING:localstack.utils.cloudformation.template_deployer: Unable to update resource type "Lambda::Permission", id "HelloLambdaPermissionApiGateway"
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Currently updating stack resource example-localhost-local/ApiGatewayResourceHello: False
localstack_1  | 2019-09-20T06:36:58:DEBUG:localstack.services.cloudformation.cloudformation_starter: Resource ApiGatewayResourceHello need not be deployed: {'Type': 'AWS::ApiGateway::Resource', 'Properties': {'ParentId': 'r5l2fz22yt', 'PathPart': 'hello', 'RestApiId': 'q8fts3masr'}}
localstack_1  | 2019-09-20T06:36:58:WARNING:localstack.services.cloudformation.cloudformation_starter: Unable to resolve "Ref" attribute for: {'Ref': 'HelloLambdaVersionPUQ1g8m26otAMm9MFGtdupVUFmCREiM65Qe8GOsw5y0'} - HelloLambdaVersionPUQ1g8m26otAMm9MFGtdupVUFmCREiM65Qe8GOsw5y0 - <class 'moto.awslambda.models.LambdaVersion'>
localstack_1  | 2019-09-20 06:37:03,265:API: 127.0.0.1 - - [20/Sep/2019 06:37:03] "GET /example-localhost-local-ServerlessDeploymentBucket-VRHY1L81PAWJ?list-type=2&prefix=serverless%2Fexample-localhost%2Flocal HTTP/1.1" 200 -
Gracefully stopping... (press Ctrl+C again to force)
Stopping localstack-hostname-bug_localstack_1 ...
Killing localstack-hostname-bug_localstack_1  ... done  